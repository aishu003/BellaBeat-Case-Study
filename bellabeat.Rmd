---
title: "BellaBeat Case study"
author: "Aiswarya Babu"
date: "2024-12-03"
output: "github_document"
---



#### **INTRODUCTION**


This case study presents a data analysis project conducted as part of the Google Data Analytics Professional Certificate course, Capstone Project, focusing on the usage of Bellabeat Smart Devices. Bellabeat is a high-tech manufacturer of health-focused smart products designed specifically for women. 

 The company was founded in 2013 by Urška Sršen and Sando Mur and has expanded quickly since, now with the possibility to become a greater player in the global smart device market. Our team have been asked to analyze smart device data to gain insight into how consumers are using their smart devices. The insights we discover will then help guide marketing strategy for the company.
 
 **Currently, company has 5 key product/services offerings:**
 
 
1. **Bellabeat app**: Health and wellness app giving health related data and informing lifestyle decisions. Serves as the hub for information collected from the other company/non-company wellness products
2. **Leaf**: Wellness tracker that can be worn as a bracelet, necklace, or clip, tracks activity, sleep, and stress
3. **Time**: Smart watch to track activity, sleep, and stress
4. **Spring**: Smart water bottle to track hydration during the day
5. **Ivy**: Ivy is a smart-wearable product made specifically for women, just like its predecessor. It monitors women's biometric data: respiratory rate, resting heart rate, heart rate variability (HRV), and cardiac coherence, as well as lifestyle data.
6. Membership: A subscription-based program to offer 24/7 personalized guidance on nutrition, health, activity, sleep, and beauty.




#### **ASK**


**BUSINESS TASK:** Identify trends in how consumers use non-Bellabeat smart devices to gain insight and help guide marketing strategy for Bellabeat to grow as a global player.

**Key Stakeholders:**

**· Urška Sršen** — Bellabeat’s cofounder and Chief Creative Officer


**·** **Sando Mu**r — Mathematician and Bellabeat’s cofounder; key member of the Bellabeat executive team


**· Bellabeat marketing analytics team** — A team of data analysts responsible for collecting, analyzing, and reporting data that helps guide Bellabeat’s marketing strategy.

#### **PREPARE**

Data Source: [FitBit Fitness Tracker Data](https://www.kaggle.com/datasets/arashnic/fitbit)

**Data Organisation**
This  data set contains personal fitness tracker from thirty fitbit users provided with 18 .CSV files. Data is organized in a long and wide format. The file contains detailed information about daily activity, sleep, weight, calories, and intensities.

The FitBit Fitness Tracker Data was collected in 2016 making the datasets outdated for current trend analysis. Additionally, while the data initially states a time range of 03-12-2016 to 05-12-2016, I am considering only the dataset with most recent available data (4/12/2016 to 5/12/2016).

**Licensing**


This dataset is under CC0: Public Domain license meaning the creator has waive his right to the work under the copyright law. Thirty eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring.

**The dataset has limitations:**


Only 30 user data is available. The central limit theorem general rule of n≥30 applies.
Limitations for this data exist due to the sample size and absence of key characteristics of the participants, such as gender, age, location, lifestyle.

The data follows an **ROCCC **approch:


**•	Reliability: **The data is from 30 FitBit users who consented to the submission of personal tracker data and generated by from a distributed survey via Amazon Mechanical Turk.


**•	Originality **: The data is from 30 FitBit users who agreed to a personal tracker, third party data collected using Amazon Mechanical Turk.


**•	Comprehensive**: Data minute-level output for physical activity, heart rate, sleep monitoring, calories used, daily steps taken. The dataset is limited and most data is recorded during certain days of the week.


**•	Current** : Information was gathered between March and May of 2016. Since the data is outdated in 2024, consumers' current FitBit usage may have altered.


**•	Cited** : CC0: Public Domain, dataset made available through Mobius



#### **PROCESS**

I will be choosing R for this project because, while I have some experience with tools like SQL and Excel, R is a new and exciting tool for me. My only exposure to R so far has been during this Certification course. R allows me to perform data cleaning, processing, and visualization efficiently within a single platform, making it an excellent choice for managing and presenting data insights effectively.




##### Set up my working directory
```{r set path}
setwd("/cloud/project/BellaBeat/")
```
##### **Setting up my environment by loading the packages**

```{r}
install.packages("tidyverse")
install.packages("skimr")
install.packages("janitor")
install.packages("dplyr")
install.packages("ggplot2")
install.packages("tidyr")
install.packages("lubridate")
install.packages("plotly")
install.packages("readr")
```


```{r}
library("here")
library("tidyverse")
library ("skimr")
library("janitor")
library("dplyr")
library("ggplot2")
library("tidyr")
library("lubridate")
library("plotly")
```

##### **Reading .csv files**
```{r load the files}
base_path <- "/cloud/project/BellaBeat/"

daily_activity <- read_csv(file.path(base_path, "dailyActivity_merged.csv"))
hourly_calories <- read_csv(file.path(base_path, "hourlyCalories_merged.csv"))
hourly_intensities <- read_csv(file.path(base_path, "hourlyIntensities_merged.csv"))
hourly_steps <- read_csv(file.path(base_path, "hourlySteps_merged.csv"))
daily_sleep <- read_csv(file.path(base_path, "sleepDay_merged.csv"))

```

##### **Display the first few rows of each dataframe**
```{r Preview our datasets}
head(daily_activity)
head(hourly_calories)
head(hourly_intensities)
head(hourly_steps)
head(daily_sleep)

```

##### **Check the structure of the data sets**

```{r Check the structure of the data sets using str()}
str(daily_activity)
str(hourly_calories)
str(hourly_intensities)
str(hourly_steps)
str(daily_sleep)
```

##### **Check the number of participants for each data set**
I will make sure to check the number of unique users per data frame before coming on with the cleaning process.

```{r pressure, echo=FALSE}
n_unique(daily_activity$Id)
n_unique(hourly_calories$Id)
n_unique(hourly_intensities$Id)
n_unique(hourly_steps$Id)
n_unique(daily_sleep$Id)
```

##### **Check for any duplicates in the data**

```{r}
sum(duplicated(daily_activity))
sum(duplicated(daily_sleep))
sum(duplicated(hourly_calories))
sum(duplicated(hourly_intensities))
sum(duplicated(hourly_steps))
```

##### **Clean and rename columns of our datasets**

I will ensure that column names are in the right syntax and same format in all datasets since datasets will be merged later on.I will are change all columns to lower case format.

```{r}
clean_names(daily_activity)
daily_activity <- rename_with(daily_activity, tolower)

clean_names(hourly_calories)
hourly_calories <- rename_with(hourly_calories, tolower)

clean_names(hourly_intensities)
hourly_intensities <- rename_with(hourly_intensities, tolower)

clean_names(hourly_steps)
hourly_steps <- rename_with(hourly_steps, tolower)

clean_names(daily_sleep)
daily_sleep <- rename_with(daily_sleep, tolower)

```

##### **Check the data again to verify that changes has been effected**
```{r}
head(daily_activity)
head(hourly_calories)
head(hourly_intensities)
head(hourly_steps)
head(daily_sleep)

```

##### **Convert datetime format for all files to make it consistent**

In daily_sleep the date formats are not consistent, so we are making all in a single format. For our hourly_calories, hourly_intensities and hourly_steps dataset, I will convert date string to date-time. For daily_activity and daily_sleep we are converting using as.Date format.
```{r}
##daily_sleep
daily_sleep <- daily_sleep %>%
  mutate(
    sleepday = case_when(
      grepl("\\d+/\\d+/\\d+ \\d+:\\d+:\\d+ [APap][Mm]", sleepday) ~ 
        as.character(as.POSIXct(sleepday, format = "%m/%d/%Y %I:%M:%S %p", tz = Sys.timezone())),
      grepl("\\d{2}-\\d{2}-\\d{4} \\d{2}:\\d{2}", sleepday) ~ 
        as.character(as.POSIXct(sleepday, format = "%m-%d-%Y %H:%M", tz = Sys.timezone())),
      TRUE ~ NA_character_  # Mark rows with unrecognized formats as NA
    )
  )

daily_sleep$sleepday <- as.Date(daily_sleep$sleepday, format = "%Y-%m-%d")
daily_sleep <- daily_sleep %>%
  rename(date = sleepday) 
class(daily_sleep$date)

##Daily_activity
daily_activity$activitydate <- as.Date(daily_activity$activitydate, format = "%d-%m-%Y")
daily_activity <- daily_activity %>%
  rename(date = activitydate)


##hourly_calories
hourly_calories <- hourly_calories %>% 
  rename(date_time = activityhour) %>% 
  mutate(date_time = as.POSIXct(date_time, format ="%m/%d/%Y %I:%M:%S %p" , tz=Sys.timezone()))
class(hourly_calories$date_time)

##hourly_intensities
hourly_intensities <- hourly_intensities %>% 
  rename(date_time = activityhour) %>% 
  mutate(date_time = as.POSIXct(date_time, format ="%m/%d/%Y %I:%M:%S %p" , tz=Sys.timezone()))
class(hourly_intensities$date_time)

##hourly_steps
hourly_steps<- hourly_steps %>% 
  rename(date_time = activityhour) %>% 
  mutate(date_time = as.POSIXct(date_time, format ="%m/%d/%Y %I:%M:%S %p" , tz=Sys.timezone()))
class(hourly_steps$date_time)

```


#### **ANALYSE**

```{r setup, include=FALSE}
knitr::opts_chunk$set(fig.width = 6, fig.height = 4)

```

##### **Percentage Distribution of Active Minutes**
```{r}
activity_summary <- daily_activity %>%
  group_by(id) %>%
  summarise(
    veryactiveminutes = sum(veryactiveminutes, na.rm = TRUE),
    fairlyactiveminutes = sum(fairlyactiveminutes, na.rm = TRUE),
    lightlyactiveminutes = sum(lightlyactiveminutes, na.rm = TRUE),
    sedentaryminutes = sum(sedentaryminutes, na.rm =TRUE)
  )

activity_summary <- activity_summary %>%
  select(veryactiveminutes, fairlyactiveminutes, lightlyactiveminutes, sedentaryminutes) %>% 
  pivot_longer(cols = everything(), names_to = "ActivityType", values_to = "Minutes") %>%
  mutate(Percentage = (Minutes / sum(Minutes)) * 100)

head(activity_summary)

```
##### **Vizualization for Percentage Distribution of Active Minutes**

```{r}
plot_ly(activity_summary, labels = ~ActivityType, values = ~Minutes,
        type = 'pie',textposition = 'outside', textinfo = 'percent',
  text = ~paste(ActivityType, ": ", round(Percentage, 2), "%"),
  marker = list(colors = c('#AADEA7', '#64C2A6', '#F6AB49', '#F66D44')),
  width = 500,  # Set the width of the chart
  height = 500  # Set the height of the chart
) %>%
  layout(
    title = 'Percentage Distribution of Active Minutes'
  )
```


**Key Observations from the Chart**:

* Percentage of active minutes in the four categories: very active, fairly active, lightly active and sedentary.

* The major issue here is the large portion of time spent sedentary and the minimal time spent in high-intensity activities (very active and fairly active). 
* This pattern is common in modern lifestyles but can have serious consequences for long-term health. Gradually increase the percentage of time spent in moderate-to-vigorous activities.

##### **Calculation of Calories Per Distance by Day**
```{r}
calories_per_distance <- daily_activity %>%
  mutate(WeekDay = weekdays(date)) %>%
  mutate(WeekDay = ordered(WeekDay, levels = c("Monday", "Tuesday", "Wednesday", "Thursday", 
                                               "Friday", "Saturday", "Sunday"))) %>%
  group_by(WeekDay) %>%
  summarise(
    calories_per_day = sum(calories, na.rm = TRUE),
    distance_per_day = sum(totaldistance, na.rm = TRUE),
    calories_per_distance = round(sum(calories, na.rm = TRUE) / sum(totaldistance, na.rm = TRUE), 2)
  )
head(calories_per_distance)

```
##### **Vizualization for Calculation of Calories Per Distance by Day**

```{r fig.width=6, fig.height=4}
ggplot(calories_per_distance, aes(x = WeekDay, y = calories_per_distance, group = 1)) +
  geom_line(color = "darkblue", linewidth = 1.2) + 
  geom_point(color = "lightblue", size = 3) +  
  scale_y_continuous(labels = scales::comma) + 
  labs(
    title = "Total Calories Burned Per Distance by Weekday",
    x = "Weekday",
    y = "Calories Per Distance"
  )

```



**Key Observations from the Chart**:

* It is observed that Sundays exhibit a relatively high proportion of calories burned per distance compared to other days of the week. 
* Leisure time on Sundays may lead users to engage in deliberate, higher-intensity physical activities. 
* Fridays Show the Second-Highest Calories Burned per Distance, this may indicate, End-of-week activities that differ from the routine, such as evening walks, gym sessions, or sports. 
* Weekdays (Monday to Friday) show a consistent range of 404–439 calories per distance, this could be attributed to a structured routine during the workweek, balancing moderate activity levels. 
* Saturday has the lowest value means  less intense physical activity.

##### **Sleep Patterns by Day of the Week**
```{r}
sleep_data_summary <- daily_sleep %>%
    mutate(Weekdays = wday(`date`, label = TRUE, week_start = 1)) %>%
    group_by(Weekdays) %>%
    summarize(
      Avg_Minutes_Asleep = mean(totalminutesasleep), 
      Avg_Time_In_Bed = mean(totaltimeinbed)
    ) %>%
    arrange(Weekdays) %>%
    pivot_longer(
      cols = c(Avg_Minutes_Asleep, Avg_Time_In_Bed), 
      names_to = "Category", 
      values_to = "Value"
    ) %>%
    mutate(Value = round(Value, 2))  # Round the Value column
  head(sleep_data_summary)

```

##### **Visualization for Sleep Patterns by Day of the Week**

```{r}
ggplot(sleep_data_summary, aes(x = Weekdays, y = Value, fill = Category)) +
   geom_bar(stat = "identity", position = position_dodge(width = 0.8)) +
   scale_fill_manual(values = c("Avg_Minutes_Asleep" = "blue", "Avg_Time_In_Bed" = "orange")) + 
   scale_y_continuous(labels = scales::label_number(accuracy = 1)) +  # Fully qualified function call
   labs(
    title = "Sleep Behavior by Day of the Week",
    x = "Day of Week",
    y = "Minutes",
    fill = "Legend"
    ) 

```


**Key Observations from the Chart**:

* Sunday being the highest average sleep time (452.75 minutes, ~7.5 hours) and longest time in bed (503.51 minutes, ~8.4 hours). 
* This indicates users might catch up on sleep on Sundays, reflecting a common recovery trend after a busy week. This is likely an effort to recover from sleep deficits accumulated during the week.
* In the graphs above we can deduce that users don’t take the recommended amount of sleep of 8 hours(480minutes).

##### **Steps per weekdays**
```{r}
weekday_steps <- daily_activity %>%
  mutate(weekday = weekdays(date))
weekday_steps$weekday <-ordered(weekday_steps$weekday, levels=c("Monday", "Tuesday", "Wednesday", "Thursday",  "Friday", "Saturday", "Sunday"))

weekday_steps <-weekday_steps %>%
  group_by(weekday) %>%
  summarize (daily_steps = sprintf("%.2f", mean(totalsteps)))
head(weekday_steps)

```

##### **Vizualization for Steps per weekdays**
```{r}
ggplot(data = weekday_steps, aes(x = weekday, y = as.numeric(daily_steps))) + 
  geom_bar(stat = "identity",fill = 'lightblue',width = 0.8) +
  geom_hline(yintercept = 7500)+
  labs(
    title = "Weekly Average Steps Distribution",
    x = "Weekday",
    y = "Daily Steps"
  ) +
  scale_y_continuous(breaks = seq(0, 10000, by = 2000))  # Adjust breaks for rounded values

```


**Key Observations from the Chart**:

* Most users are consistent with their daily steps routine, except Sunday which more like a relaxation day.
* Weekdays show consistent step counts averaging around 7,700 steps. This consistency suggests a routine influenced by daily schedules like work or commuting. 
* Saturdays are the most active, likely due to non-workday opportunities for movement. As per 2011 CDC study 7,500–9,999 Steps per day is considered as Somewhat active. 
* Most of the people who are using the BellaBeat product is achieving there weekly steps goals.*

##### **Hourly steps throughout the day**
```{r}
hourly_steps <- hourly_steps %>%
  mutate(
    date = format(date_time, "%Y-%m-%d"),  
    time = format(date_time, "%H:%M:%S")   
  ) %>%
  mutate(date = ymd(date)) %>%  
  select(id, date, time, steptotal) %>%  
  group_by(time) %>%  
  summarize(average_steps = mean(steptotal))  # Calculate average steps for each time

head(hourly_steps)

```

##### Vizualization for Hourly steps throughout the day
```{r}
ggplot(hourly_steps, aes(x = time, y = average_steps, fill = average_steps)) +  # Map fill to average_steps
  geom_bar(stat = "identity") +  
  scale_fill_gradient(low = "lightblue", high = "darkblue") +  
  labs(
    title = "Hourly Step Activity", 
    x = "Time of Day", 
    y = "Average Steps"
  ) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1))  # Rotate x-axis labels for readability

```


**Key Observations from the Chart**:

* The hour of 6 p.m. is when the greatest average number of steps is recorded. 
* It appears from this data that people are more likely to be physically active in the evening. After finishing their work for the day, individuals might head to the gym or go for a walk , as the majority of the activity takes place between 5pm to 7 p.m.


##### **Correlation of Calories with Active Minutes**
```{r}
active_minutes_calories <- daily_activity %>%
  group_by(id, date) %>%
  summarise(
    Total_Very_Active_Minutes = sum(veryactiveminutes, na.rm = TRUE),  # Sum of Very Active Minutes
    Total_Calories = sum(calories, na.rm = TRUE)  # Sum of Calories
  ) %>%
  ungroup() %>%
  mutate(
      Calories_Per_VeryActiveMinute = if_else(Total_Very_Active_Minutes == 0, NA_real_, Total_Calories / Total_Very_Active_Minutes),
      Calories_Per_VeryActiveMinute = Total_Calories / Total_Very_Active_Minutes  # Calculate calories per very active minute
  )
head(active_minutes_calories)

```

##### **Vizualization for Correlation of Calories with Active Minutes**
```{r}
active_minutes_calories %>%
  ggplot(aes(x = Total_Very_Active_Minutes, y = Total_Calories, color = Calories_Per_VeryActiveMinute)) +
  geom_point() +
  scale_color_gradient(low = "lightblue", high = "darkblue") +  
  labs(title = "Correlation Between Active Minutes and Calorie Burn", 
       x = "Total Very Active Minutes", 
       y = "Total Calories Burned") +
  theme_minimal() 

```


**Key Observations from the Chart**:


* There is a more pronounced positive relationship between VeryActiveMinutes and calories burned. 
* Even a small increase in VeryActiveMinutes leads to a meaningful increase in calories burned, demonstrating the disproportionate impact of intensity compared to activity duration alone. 
* I assume we can encourage individuals to include even short bursts of high-intensity workouts (e.g., interval training) in their routines for maximum calorie burn.



#### **ACT PHASE**

The analysis highlights key patterns in activity and sleep behaviour. Prolonged sedentary time (81.3%) and insufficient high-intensity activities increase health risks, emphasizing the need to reduce inactivity. Sleep duration averages 6.7–7.5 hours, slightly below the recommended 7–9 hours, suggesting a focus on better sleep hygiene to improve rest quality. Step counts generally meet or exceed the 7,500-step baseline, with peak activity in the evening (5–7 PM). While Sundays are restful with improved sleep, they are marked by reduced activity, underscoring the importance of maintaining consistent physical activity throughout the week.
This summary encapsulates the overall findings based on the insights derived from the data analysis.

### **RECOMMENDATIONS**



* **Personalized Activity and Lifestyle Goals**
Set activity and step targets based on users’ past performance, lifestyle, or preferences, customizable during sign-up. Offer calorie-tracking features or integrate with third-party apps to align physical activity data with dietary goals. Provide meal suggestions or personalized diet plans and include hydration reminders to encourage a balanced lifestyle.


* **Sedentary and Heart Rate Alerts**
Notify users to engage in light activities after prolonged inactivity with prompts like, "You’ve been sedentary for 2 hours; take a 5-minute walk!". Additionally, monitor heart rate and send alerts for abnormal fluctuations, ensuring timely action if thresholds are exceeded.


* **Sleep and Recovery Insights**
Provide tailored advice for improving sleep routines, such as setting a regular bedtime, reducing screen time, or relaxing before sleep. Include tips for creating a restful environment and maintaining consistent recovery practices.


* **Weekly Dashboard **
Summarize weekly activity, calories burned, and sleep performance with improvement tips in a user-friendly dashboard. Share a detailed summary every Sunday to help users track progress and adopt healthier habits.


* **Motivational Features and Social Engagement**
Incorporate gamified elements like streaks, badges, and friendly competitions to keep users motivated. Include period tracking features to help users monitor their menstrual cycles, including reminders for expected periods, ovulation, and tips for managing symptoms.

##### **Conclusion**
Implementing these recommendations can significantly enhance the Bellabeat app's ability to support users in achieving a healthier lifestyle. By offering the above recommendations the app can create a holistic experience that fosters long-term habits. These features not only improve user satisfaction but also position Bellabeat as a comprehensive wellness companion.
